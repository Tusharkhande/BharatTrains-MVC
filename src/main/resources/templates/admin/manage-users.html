<html xmlns:th="http://www.thymeleaf.org"
	th:replace="~{base::layout(~{::div}, '')}">
<head>
<title>Search Results</title>
<!-- Add Bootstrap CSS -->
<link
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
	rel="stylesheet">
</head>
<body>
	<div class="container mt-4">
		<h2 class="text-center text-primary">Manage Users</h2>
		<div class="table-responsive">
			<table class="table table-hover mt-3">
				<thead class="table-dark">
					<tr>
						<th>User ID</th>
						<th>Username</th>
						<th>Email</th>
						<th>Phone No</th>
						<th>Role</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="user : ${users}">
						<td th:text="${user.userId}"></td>
						<td th:text="${user.username}"></td>
						<td th:text="${user.email}"></td>
						<td th:text="${user.phoneno}"></td>
						<td><span class="badge bg-info" th:text="${user.role}"></span>
						</td>
						<td>
							<!-- Delete Button Triggers Modal -->
							<button class="btn btn-danger btn-sm" data-bs-toggle="modal"
								th:attr="data-bs-target='#deleteUserModal' + ${user.userId}">
								<i class="fas fa-trash"></i> Delete
							</button> <!-- Delete Confirmation Modal -->
							<div class="modal fade"
								th:id="'deleteUserModal' + ${user.userId}" tabindex="-1">
								<div class="modal-dialog modal-dialog-centered">
									<div class="modal-content">
										<div class="modal-header bg-danger text-white">
											<h5 class="modal-title">Confirm Delete</h5>
											<button type="button" class="btn-close"
												data-bs-dismiss="modal"></button>
										</div>
										<div class="modal-body">
											<p>
												Are you sure you want to delete <strong
													th:text="${user.username}"></strong>?
											</p>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary"
												data-bs-dismiss="modal">Cancel</button>
											<form th:action="@{/bharattrains/admin/deleteUser}" method="post">
												<input type="hidden" name="userId" th:value="${user.userId}">
												<button type="submit" class="btn btn-danger">
													<i class="fas fa-trash"></i> Delete
												</button>
											</form>
										</div>
									</div>
								</div>
							</div> <!-- End Modal -->
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</body>
</html>